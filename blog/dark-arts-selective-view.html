<!doctype html>
<html>
<head>
<script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
  <script>
//<![CDATA[
let App={};
App.addresses={
"1":{
	name:"Alice Crypter",
	street:"Street 1",
	postal:"Postal 1"
},
"2":{
	name:"Bob Crypter",
	street:"Street 2",
	postal:"Postal 2"
},
"3":{
	name:"John Doe",
	street:"Street 3",
	postal:"Postal 3"
},
"4":{
	name:"Dr. Oz",
	street:"Street 4",
	postal:"Postal 4"
}
};
App.on_hash_changed=function(){
  var hash = (""+window.location.hash);
  console.log("hash",hash);
  if (!hash || hash==""){
	  window.location.hash="#overview";
	  return;
  }
  hash = hash.substring(1);
  console.log("hash",hash);
  if (hash.indexOf("details_")!=-1){
	  $(window).trigger("details",[parseInt(hash.substring(8))]);
  } else
    $(window).trigger("overview");
	
}
App.set_state=function(state){
  $("#container").attr("class",state);
}
App.on_init=function(){
  console.log("app init");
  App.on_hash_changed();
}

App.show_overview=function(){
  console.log("showing overview screen");
  $("#container").attr("class","state-overview");
}

App.show_details=function(e, id){
  console.log("showing details screen for",id);
  let item = App.addresses[""+id];
  console.log("item",item);
  $("#container").attr("class","state-details");
  $("#name").val(item.name);
  $("#street").val(item.street);
  $("#postal").val(item.postal);
}

$(window).on("hashchange",App.on_hash_changed);
$(window).on("overview",App.show_overview);
$(window).on("details",App.show_details);
$(document).ready(App.on_init);

//]]>
  </script>
<style>
.hidden{
	display:none;
}
.state-overview .show-on-overview, .state-details .show-on-details{
	display:block;
}
</style>
</head>
<body>
<div id=container>
<form class="hidden show-on-overview">
  <div class=list>
    <a href="#details_1">Alice Crypter</a>
    <a href="#details_2">Bob Crypter</a>
    <a href="#details_3">John Doe</a>
    <a href="#details_4">Dr. Oz</a>
  </div>
</form>
<form class="hidden show-on-details">
	<a href="#overview">back</a>
	<label>Name <input id=name type=text/></label>
	<label>Street <input id=street type=text/></label>
	<label>Postal <input id=postal type=text/></label>
</form>
</div>
</body>
</html>
